<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="google-site-verification" content="LNlUqDUsoIcbzDScfKmDdou7-1QTsmke3M4EbB1NFyo" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test de Vitesse Internet Gratuit â€“ Gaming, TÃ©lÃ©travail, Streaming | NetDiag Pro</title>

  <!-- â”€â”€ Primary Meta Tags â”€â”€ -->
  <meta name="title" content="Test de Vitesse Internet Gratuit â€“ Gaming, TÃ©lÃ©travail, Streaming | NetDiag Pro" />
  <meta name="description"
    content="Testez votre vitesse internet en quelques secondes : Ping, Download et Upload. Diagnostic spÃ©cialisÃ© pour le gaming, le tÃ©lÃ©travail et le streaming 4K. RÃ©sultats instantanÃ©s et recommandations personnalisÃ©es." />
  <meta name="keywords"
    content="test vitesse internet, tester connexion internet, test ping gaming, diagnostic connexion tÃ©lÃ©travail, speedtest gratuit, test dÃ©bit internet, vitesse download upload, test connexion Netflix 4K, test connexion fortnite, amÃ©liorer connexion internet, tester dÃ©bit wifi, speedtest franÃ§ais" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="NetDiag Pro" />
  <link rel="canonical" href="https://netdiag.pro/" />

  <!-- â”€â”€ Open Graph / Facebook â”€â”€ -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://netdiag.pro/" />
  <meta property="og:title" content="Test de Vitesse Internet Gratuit â€“ Gaming, TÃ©lÃ©travail, Streaming" />
  <meta property="og:description"
    content="Testez Ping, Download et Upload en temps rÃ©el. Analyse spÃ©cialisÃ©e pour le gaming, le tÃ©lÃ©travail et le streaming 4K avec recommandations personnalisÃ©es." />
  <meta property="og:image" content="https://netdiag.pro/og-image.png" />
  <meta property="og:locale" content="fr_FR" />
  <meta property="og:site_name" content="NetDiag Pro" />

  <!-- â”€â”€ Twitter Card â”€â”€ -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="https://netdiag.pro/" />
  <meta name="twitter:title" content="Test de Vitesse Internet â€“ Gaming, TÃ©lÃ©travail, Streaming" />
  <meta name="twitter:description"
    content="Diagnostic complet de votre connexion : Ping, Download, Upload. RÃ©sultats instantanÃ©s et conseils personnalisÃ©s." />
  <meta name="twitter:image" content="https://netdiag.pro/og-image.png" />

  <!-- â”€â”€ JSON-LD Structured Data â”€â”€ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "NetDiag Pro",
    "url": "https://netdiag.pro/",
    "description": "Outil gratuit de test de vitesse internet avec diagnostic spÃ©cialisÃ© gaming, tÃ©lÃ©travail et streaming 4K.",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "All",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "EUR"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "reviewCount": "1024"
    },
    "featureList": [
      "Test de vitesse Ping en temps rÃ©el",
      "Mesure Download et Upload prÃ©cise",
      "Analyse gaming (Fortnite, FIFA, GTA VI)",
      "Diagnostic tÃ©lÃ©travail (Zoom, Teams, Google Meet)",
      "Score streaming 4K (Netflix, YouTube, Disney+)",
      "Recommandations personnalisÃ©es"
    ]
  }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            neon: '#7c3aed',
            cyan: '#06b6d4',
            darkbg: '#080c18',
            surface: '#0f1629',
            card: '#141e35',
          },
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
          animation: {
            'pulse-slow': 'pulse 3s ease-in-out infinite',
            'spin-slow': 'spin 8s linear infinite',
            'float': 'float 4s ease-in-out infinite',
            'slideUp': 'slideUp 0.6s ease-out forwards',
            'fadeIn': 'fadeIn 0.8s ease-out forwards',
          },
          keyframes: {
            float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
            slideUp: { '0%': { opacity: 0, transform: 'translateY(30px)' }, '100%': { opacity: 1, transform: 'translateY(0)' } },
            fadeIn: { '0%': { opacity: 0 }, '100%': { opacity: 1 } },
          },
        }
      }
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --neon: #7c3aed;
      --cyan: #06b6d4;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: #080c18;
      font-family: 'Inter', sans-serif;
      color: #e2e8f0;
      overflow-x: hidden;
    }

    /* â”€â”€â”€ Animated background â”€â”€â”€ */
    .bg-grid {
      position: fixed;
      inset: 0;
      z-index: 0;
      background-image:
        linear-gradient(rgba(124, 58, 237, .04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(124, 58, 237, .04) 1px, transparent 1px);
      background-size: 60px 60px;
      animation: gridScroll 20s linear infinite;
    }

    @keyframes gridScroll {
      to {
        background-position: 60px 60px;
      }
    }

    .glow-orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(100px);
      pointer-events: none;
      z-index: 0;
      animation: orbFloat 12s ease-in-out infinite;
    }

    @keyframes orbFloat {

      0%,
      100% {
        transform: translateY(0) scale(1);
      }

      50% {
        transform: translateY(-40px) scale(1.1);
      }
    }

    /* â”€â”€â”€ Glassmorphism â”€â”€â”€ */
    .glass {
      background: rgba(15, 22, 41, 0.6);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(124, 58, 237, 0.2);
    }

    .glass-card {
      background: rgba(20, 30, 53, 0.7);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(124, 58, 237, 0.15);
      transition: all 0.3s ease;
    }

    .glass-card:hover {
      border-color: rgba(124, 58, 237, 0.5);
      transform: translateY(-4px);
      box-shadow: 0 20px 60px rgba(124, 58, 237, 0.2);
    }

    /* â”€â”€â”€ Gauge SVG â”€â”€â”€ */
    #gauge-arc {
      transition: stroke-dashoffset 0.4s ease-out;
      stroke-linecap: round;
    }

    #needle {
      transform-origin: 50% 100%;
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* â”€â”€â”€ Animated Button â”€â”€â”€ */
    .btn-launch {
      background: linear-gradient(135deg, #7c3aed, #0891b2);
      position: relative;
      overflow: hidden;
      transition: all 0.4s ease;
      box-shadow: 0 0 40px rgba(124, 58, 237, 0.4);
    }

    .btn-launch::before {
      content: '';
      position: absolute;
      inset: -2px;
      border-radius: inherit;
      background: linear-gradient(135deg, #a855f7, #22d3ee, #7c3aed);
      z-index: -1;
      animation: borderRotate 3s linear infinite;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .btn-launch:hover::before {
      opacity: 1;
    }

    .btn-launch:hover {
      transform: scale(1.05);
      box-shadow: 0 0 60px rgba(124, 58, 237, 0.7);
    }

    .btn-launch:active {
      transform: scale(0.97);
    }

    @keyframes borderRotate {
      to {
        filter: hue-rotate(360deg);
      }
    }

    /* â”€â”€â”€ Metric display â”€â”€â”€ */
    .metric-value {
      font-variant-numeric: tabular-nums;
    }

    .metric-bar {
      height: 4px;
      border-radius: 2px;
      background: rgba(255, 255, 255, 0.06);
      overflow: hidden;
    }

    .metric-bar-fill {
      height: 100%;
      border-radius: 2px;
      transition: width 0.4s ease;
    }

    /* â”€â”€â”€ Score circle â”€â”€â”€ */
    .score-ring {
      transition: stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* â”€â”€â”€ Niche badge â”€â”€â”€ */
    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: 99px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .pill-green {
      background: rgba(34, 197, 94, .15);
      color: #4ade80;
      border: 1px solid rgba(34, 197, 94, .3);
    }

    .pill-yellow {
      background: rgba(234, 179, 8, .15);
      color: #facc15;
      border: 1px solid rgba(234, 179, 8, .3);
    }

    .pill-red {
      background: rgba(239, 68, 68, .15);
      color: #f87171;
      border: 1px solid rgba(239, 68, 68, .3);
    }

    /* â”€â”€â”€ Affiliation button â”€â”€â”€ */
    .aff-btn {
      background: linear-gradient(135deg, rgba(124, 58, 237, .15), rgba(6, 182, 212, .1));
      border: 1px solid rgba(124, 58, 237, .3);
      transition: all 0.3s ease;
    }

    .aff-btn:hover {
      background: linear-gradient(135deg, rgba(124, 58, 237, .35), rgba(6, 182, 212, .25));
      border-color: rgba(124, 58, 237, .6);
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(124, 58, 237, .3);
    }

    /* â”€â”€â”€ Progress pulse ring â”€â”€â”€ */
    @keyframes pingRing {
      0% {
        transform: scale(1);
        opacity: .8;
      }

      100% {
        transform: scale(2.2);
        opacity: 0;
      }
    }

    .ping-ring {
      animation: pingRing 1.5s ease-out infinite;
    }

    .ping-ring-2 {
      animation-delay: 0.5s;
    }

    .ping-ring-3 {
      animation-delay: 1s;
    }

    /* â”€â”€â”€ Wave loader â”€â”€â”€ */
    .wave-bar {
      width: 6px;
      border-radius: 3px;
      animation: wave 1.2s ease-in-out infinite;
    }

    @keyframes wave {

      0%,
      100% {
        transform: scaleY(0.4);
        opacity: 0.5;
      }

      50% {
        transform: scaleY(1);
        opacity: 1;
      }
    }

    /* scroll fade */
    .scroll-reveal {
      opacity: 0;
      transform: translateY(24px);
      transition: all 0.7s ease;
    }

    .scroll-reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* â”€â”€â”€ Live speed number â”€â”€â”€ */
    .live-number {
      color: #22d3ee;
      /* cyan-400  â€“ toujours visible */
      text-shadow: 0 0 30px rgba(34, 211, 238, .5), 0 0 60px rgba(124, 58, 237, .3);
      transition: color 0.3s ease;
    }

    .live-number.phase-ping {
      color: #a78bfa;
      text-shadow: 0 0 30px rgba(167, 139, 250, .5);
    }

    .live-number.phase-dl {
      color: #22d3ee;
      text-shadow: 0 0 30px rgba(34, 211, 238, .5);
    }

    .live-number.phase-ul {
      color: #4ade80;
      text-shadow: 0 0 30px rgba(74, 222, 128, .5);
    }

    /* â”€â”€â”€ Branding Background â”€â”€â”€ */
    .branding-bg {
      position: absolute;
      inset: 0;
      z-index: -1;
      background-image: url('og-image.png');
      background-size: cover;
      background-position: center;
      opacity: 0.15;
      filter: blur(4px);
      border-radius: 2rem;
    }

    .branding-overlay {
      position: absolute;
      inset: 0;
      z-index: -1;
      background: radial-gradient(circle at center, transparent 0%, #080c18 100%);
      border-radius: 2rem;
    }
  </style>
</head>

<body class="min-h-screen">

  <!-- Background elements -->
  <div class="bg-grid"></div>
  <div class="glow-orb w-96 h-96 top-0 left-1/4" style="background: rgba(124,58,237,.25); animation-delay: 0s;"></div>
  <div class="glow-orb w-80 h-80 bottom-1/3 right-1/4" style="background: rgba(6,182,212,.18); animation-delay: 4s;">
  </div>
  <div class="glow-orb w-64 h-64 top-1/2 left-0" style="background: rgba(168,85,247,.12); animation-delay: 8s;"></div>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header class="relative z-10 flex items-center justify-between px-6 py-5 max-w-6xl mx-auto">
    <div class="flex items-center gap-3">
      <div class="w-9 h-9 rounded-xl flex items-center justify-center"
        style="background: linear-gradient(135deg, #7c3aed, #06b6d4);">
        <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
        </svg>
      </div>
      <span class="font-bold text-xl tracking-tight"
        style="background: linear-gradient(135deg, #a78bfa, #22d3ee); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">NetDiag
        <span class="font-black">Pro</span></span>
    </div>
    <div class="hidden md:flex items-center gap-2">
      <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></div>
      <span class="text-sm text-slate-400">Serveurs actifs</span>
    </div>
  </header>

  <!--  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HERO / GAUGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <main class="relative z-10">
    <section class="min-h-screen flex flex-col items-center justify-center px-4 pt-8 pb-16">

      <!-- Tagline -->
      <div class="text-center mb-8 animate-fadeIn">
        <p class="text-sm font-semibold tracking-widest text-violet-400 uppercase mb-3">Diagnostic Ultra-PrÃ©cis</p>
        <h1 class="text-4xl md:text-6xl font-black leading-tight mb-4">
          <span
            style="background: linear-gradient(135deg, #e2e8f0, #a78bfa, #22d3ee); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            Testez votre<br />connexion internet
          </span>
        </h1>
        <p class="text-slate-400 text-lg max-w-md mx-auto">Ping Â· Download Â· Upload â€” RÃ©sultats en temps rÃ©el</p>
      </div>

      <!-- Gauge Container -->
      <div class="glass rounded-3xl p-6 md:p-10 w-full max-w-lg shadow-2xl animate-slideUp"
        style="box-shadow: 0 30px 80px rgba(124,58,237,.25);">

        <!-- SVG Gauge -->
        <div class="relative flex flex-col items-center">
          <svg viewBox="0 0 280 170" class="w-full max-w-xs mb-4" aria-label="Jauge de vitesse">
            <!-- Background track -->
            <path d="M30,155 A110,110 0 0,1 250,155" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="16"
              stroke-linecap="round" />
            <!-- Colored gradient arc -->
            <defs>
              <linearGradient id="gaugeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#7c3aed" />
                <stop offset="50%" stop-color="#06b6d4" />
                <stop offset="100%" stop-color="#4ade80" />
              </linearGradient>
              <filter id="glow">
                <feGaussianBlur stdDeviation="4" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>
            <path id="gauge-arc" d="M30,155 A110,110 0 0,1 250,155" fill="none" stroke="url(#gaugeGrad)"
              stroke-width="16" stroke-linecap="round" stroke-dasharray="345" stroke-dashoffset="345"
              filter="url(#glow)" />
            <!-- Tick marks -->
            <g stroke="rgba(255,255,255,0.2)" stroke-width="1.5">
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(-90 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(-67.5 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(-45 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(-22.5 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(0 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(22.5 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(45 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(67.5 140 155)" />
              <line x1="30" y1="155" x2="40" y2="133" transform="rotate(90 140 155)" />
            </g>
            <!-- Needle -->
            <polygon id="needle" points="137,155 143,155 141,58 139,58" fill="url(#gaugeGrad)" filter="url(#glow)"
              transform="rotate(-90 140 155)" />
            <!-- Center hub -->
            <circle cx="140" cy="155" r="12" fill="#0f1629" stroke="rgba(124,58,237,.6)" stroke-width="2" />
            <circle cx="140" cy="155" r="5" fill="url(#gaugeGrad)" />
            <!-- Speed labels -->
            <text x="24" y="170" fill="rgba(255,255,255,0.35)" font-size="10" text-anchor="middle">0</text>
            <text x="256" y="170" fill="rgba(255,255,255,0.35)" font-size="10" text-anchor="middle">1Gbps</text>
          </svg>

          <!-- Current speed readout -->
          <div class="text-center -mt-2 mb-6">
            <div class="flex items-end justify-center gap-2">
              <span id="live-value" class="metric-value text-7xl font-black live-number">0</span>
              <span id="live-unit" class="text-violet-300 text-2xl font-bold mb-4">Mbps</span>
            </div>
            <p id="live-label" class="text-slate-500 text-sm font-medium tracking-wider uppercase">En attenteâ€¦</p>
          </div>

          <!-- Ping / Download / Upload pills (live) -->
          <div class="grid grid-cols-3 gap-3 w-full mb-8" id="metrics-grid">
            <!-- PING -->
            <div class="glass rounded-2xl p-3 text-center">
              <div class="flex items-center justify-center gap-1.5 mb-2">
                <div class="w-2 h-2 rounded-full bg-violet-400"></div>
                <span class="text-xs text-slate-400 font-semibold uppercase tracking-wider">Ping</span>
              </div>
              <p id="metric-ping" class="metric-value text-2xl font-black text-violet-300">â€”</p>
              <p class="text-xs text-slate-500">ms</p>
            </div>
            <!-- DOWNLOAD -->
            <div class="glass rounded-2xl p-4 text-center border border-cyan-500/20">
              <div class="flex items-center justify-center gap-1.5 mb-2">
                <div class="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></div>
                <span class="text-xs text-cyan-400 font-bold uppercase tracking-wider">â†“ Download</span>
              </div>
              <p id="metric-dl" class="metric-value text-3xl font-black text-cyan-300">â€”</p>
              <p class="text-xs text-slate-400 font-semibold">Mbps</p>
            </div>
            <!-- UPLOAD -->
            <div class="glass rounded-2xl p-4 text-center border border-green-500/20">
              <div class="flex items-center justify-center gap-1.5 mb-2">
                <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></div>
                <span class="text-xs text-green-400 font-bold uppercase tracking-wider">â†‘ Upload</span>
              </div>
              <p id="metric-ul" class="metric-value text-3xl font-black text-green-300">â€”</p>
              <p class="text-xs text-slate-400 font-semibold">Mbps</p>
            </div>
          </div>

          <!-- Launch button -->
          <div id="launch-wrap" class="w-full flex flex-col items-center gap-4">
            <div class="relative">
              <div class="ping-ring absolute inset-0 rounded-full" style="background: rgba(124,58,237,.3);"></div>
              <div class="ping-ring ping-ring-2 absolute inset-0 rounded-full" style="background: rgba(124,58,237,.2);">
              </div>
              <button id="btn-start" onclick="startTest()"
                class="btn-launch relative text-white font-bold text-lg px-10 py-4 rounded-full tracking-wide cursor-pointer z-10">
                ğŸš€ Lancer le diagnostic
              </button>
            </div>
            <p class="text-slate-500 text-xs">Votre IP n'est pas enregistrÃ©e</p>
          </div>

          <!-- Wave loader (hidden by default) -->
          <div id="wave-loader" class="hidden flex-col items-center gap-6 w-full">
            <div class="flex items-end gap-1.5 h-10">
              <div class="wave-bar h-4 bg-violet-500" style="animation-delay:.0s"></div>
              <div class="wave-bar h-6 bg-violet-400" style="animation-delay:.15s"></div>
              <div class="wave-bar h-10 bg-violet-300" style="animation-delay:.3s"></div>
              <div class="wave-bar h-6 bg-cyan-400" style="animation-delay:.45s"></div>
              <div class="wave-bar h-4 bg-cyan-300" style="animation-delay:.6s"></div>
            </div>
            <p id="phase-label" class="text-violet-300 text-sm font-semibold tracking-wider uppercase">Mesure du Pingâ€¦
            </p>
          </div>

        </div>
      </div>

      <!-- Scroll hint -->
      <div id="scroll-hint" class="hidden mt-8 flex-col items-center gap-2 animate-float">
        <p class="text-slate-500 text-sm">Voir l'analyse complÃ¨te</p>
        <svg class="w-5 h-5 text-violet-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </div>
    </section>

    <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ RESULTS PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="results-panel" class="hidden relative px-4 pb-24 max-w-6xl mx-auto mt-12">
      <!-- Branding Background -->
      <div class="branding-bg"></div>
      <div class="branding-overlay"></div>

      <!-- Summary bar -->
      <div id="summary-bar" class="glass rounded-2xl p-5 mb-10 scroll-reveal grid grid-cols-3 gap-4 text-center">
        <div>
          <p class="text-xs text-slate-400 uppercase tracking-wider mb-1">Ping final</p>
          <p id="res-ping" class="text-3xl font-black text-violet-400">â€”</p>
          <p class="text-xs text-slate-500">ms</p>
        </div>
        <div class="border-x border-white/5">
          <p class="text-xs text-slate-400 uppercase tracking-wider mb-1">Download</p>
          <p id="res-dl" class="text-3xl font-black text-cyan-400">â€”</p>
          <p class="text-xs text-slate-500">Mbps</p>
        </div>
        <div>
          <p class="text-xs text-slate-400 uppercase tracking-wider mb-1">Upload</p>
          <p id="res-ul" class="text-3xl font-black text-green-400">â€”</p>
          <p class="text-xs text-slate-500">Mbps</p>
        </div>
      </div>

      <!-- Section title -->
      <h2 class="text-center text-2xl md:text-3xl font-black mb-2 scroll-reveal"
        style="background: linear-gradient(135deg, #e2e8f0, #a78bfa); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        Analyse Triple Niche</h2>
      <p class="text-center text-slate-500 text-sm mb-10 scroll-reveal">Votre connexion Ã©valuÃ©e pour chaque usage</p>

      <!-- 3 niche cards -->
      <div class="grid md:grid-cols-3 gap-6 mb-16">

        <!-- GAMING -->
        <div id="card-gaming" class="glass-card rounded-3xl p-6 scroll-reveal">
          <div class="flex items-center gap-3 mb-5">
            <div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl"
              style="background: linear-gradient(135deg, rgba(124,58,237,.3), rgba(168,85,247,.2)); border: 1px solid rgba(124,58,237,.4);">
              ğŸ®</div>
            <div>
              <h3 class="font-bold text-white">Mode Gaming</h3>
              <p class="text-xs text-slate-400">Ping & Jitter</p>
            </div>
          </div>
          <!-- Score ring -->
          <div class="flex justify-center mb-4">
            <div class="relative w-28 h-28">
              <svg viewBox="0 0 100 100" class="w-full h-full -rotate-90">
                <circle cx="50" cy="50" r="38" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="10" />
                <circle id="ring-gaming" cx="50" cy="50" r="38" fill="none" stroke="url(#gcGrad)" stroke-width="10"
                  stroke-dasharray="239" stroke-dashoffset="239" stroke-linecap="round" class="score-ring" />
                <defs>
                  <linearGradient id="gcGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#7c3aed" />
                    <stop offset="100%" stop-color="#a855f7" />
                  </linearGradient>
                </defs>
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="score-gaming" class="text-3xl font-black text-white">â€”</span>
                <span class="text-xs text-slate-400">/100</span>
              </div>
            </div>
          </div>
          <div id="verdict-gaming" class="space-y-2 text-sm"></div>
        </div>

        <!-- TÃ‰LÃ‰TVAIL -->
        <div id="card-travail" class="glass-card rounded-3xl p-6 scroll-reveal" style="animation-delay:.15s">
          <div class="flex items-center gap-3 mb-5">
            <div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl"
              style="background: linear-gradient(135deg, rgba(6,182,212,.3), rgba(34,211,238,.2)); border: 1px solid rgba(6,182,212,.4);">
              ğŸ’¼</div>
            <div>
              <h3 class="font-bold text-white">Mode TÃ©lÃ©travail</h3>
              <p class="text-xs text-slate-400">Upload & StabilitÃ©</p>
            </div>
          </div>
          <div class="flex justify-center mb-4">
            <div class="relative w-28 h-28">
              <svg viewBox="0 0 100 100" class="w-full h-full -rotate-90">
                <circle cx="50" cy="50" r="38" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="10" />
                <circle id="ring-travail" cx="50" cy="50" r="38" fill="none" stroke="url(#tcGrad)" stroke-width="10"
                  stroke-dasharray="239" stroke-dashoffset="239" stroke-linecap="round" class="score-ring" />
                <defs>
                  <linearGradient id="tcGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#06b6d4" />
                    <stop offset="100%" stop-color="#22d3ee" />
                  </linearGradient>
                </defs>
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="score-travail" class="text-3xl font-black text-white">â€”</span>
                <span class="text-xs text-slate-400">/100</span>
              </div>
            </div>
          </div>
          <div id="verdict-travail" class="space-y-2 text-sm"></div>
        </div>

        <!-- DIVERTISSEMENT -->
        <div id="card-stream" class="glass-card rounded-3xl p-6 scroll-reveal" style="animation-delay:.3s">
          <div class="flex items-center gap-3 mb-5">
            <div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl"
              style="background: linear-gradient(135deg, rgba(34,197,94,.25), rgba(74,222,128,.15)); border: 1px solid rgba(34,197,94,.35);">
              ğŸ¬</div>
            <div>
              <h3 class="font-bold text-white">Mode Divertissement</h3>
              <p class="text-xs text-slate-400">Download & QualitÃ©</p>
            </div>
          </div>
          <div class="flex justify-center mb-4">
            <div class="relative w-28 h-28">
              <svg viewBox="0 0 100 100" class="w-full h-full -rotate-90">
                <circle cx="50" cy="50" r="38" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="10" />
                <circle id="ring-stream" cx="50" cy="50" r="38" fill="none" stroke="url(#scGrad)" stroke-width="10"
                  stroke-dasharray="239" stroke-dashoffset="239" stroke-linecap="round" class="score-ring" />
                <defs>
                  <linearGradient id="scGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#22c55e" />
                    <stop offset="100%" stop-color="#4ade80" />
                  </linearGradient>
                </defs>
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="score-stream" class="text-3xl font-black text-white">â€”</span>
                <span class="text-xs text-slate-400">/100</span>
              </div>
            </div>
          </div>
          <div id="verdict-stream" class="space-y-2 text-sm"></div>
        </div>
      </div>

      <!-- â”€â”€â”€ RECOMMENDATION / AFFILIATION SECTION â”€â”€â”€ -->
      <h2 class="text-center text-2xl md:text-3xl font-black mb-2 scroll-reveal"
        style="background: linear-gradient(135deg, #e2e8f0, #22d3ee); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        Conseils PersonnalisÃ©s</h2>
      <p class="text-center text-slate-500 text-sm mb-8 scroll-reveal">BasÃ©s sur les rÃ©sultats de votre diagnostic</p>

      <div id="reco-cards" class="grid md:grid-cols-2 gap-6 mb-10"></div>

      <!-- Re-test -->
      <div class="flex justify-center mt-4 scroll-reveal">
        <button onclick="resetTest()"
          class="flex items-center gap-2 px-8 py-3 rounded-full text-white font-semibold glass border border-violet-500/30 hover:border-violet-500/70 hover:bg-violet-500/10 transition-all duration-300">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
          Relancer le diagnostic
        </button>
      </div>
    </div>
  </main>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <footer class="relative z-10 text-center py-8 px-4 border-t border-white/5">
    <p class="text-slate-600 text-xs">Â© 2026 NetDiag Pro Â· Les rÃ©sultats sont indicatifs et peuvent varier Â· <span
        class="text-violet-700">Aucune donnÃ©e personnelle collectÃ©e</span></p>
  </footer>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SCRIPTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //   SPEED TEST ENGINE (Fetch-based real measurement)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const DOWNLOAD_URL = 'https://speed.cloudflare.com/__down?bytes=20000000'; // 20 MB single fetch
    const UPLOAD_URL = 'https://speed.cloudflare.com/__up';
    const PING_URL = 'https://speed.cloudflare.com/__ping';

    // State
    let results = { ping: 0, jitter: 0, download: 0, upload: 0 };
    let testRunning = false;

    // â”€â”€â”€ UI helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const gauge = document.getElementById('gauge-arc');
    const needle = document.getElementById('needle');
    const liveValue = document.getElementById('live-value');
    const liveUnit = document.getElementById('live-unit');
    const liveLabel = document.getElementById('live-label');
    const metricPing = document.getElementById('metric-ping');
    const metricDl = document.getElementById('metric-dl');
    const metricUl = document.getElementById('metric-ul');
    const btnStart = document.getElementById('btn-start');
    const launchWrap = document.getElementById('launch-wrap');
    const waveLoader = document.getElementById('wave-loader');
    const phaseLabel = document.getElementById('phase-label');

    function setGauge(pct) {           // pct: 0-1
      const len = 345;
      gauge.style.strokeDashoffset = len - len * pct;
      const deg = -90 + 180 * pct;
      needle.style.transform = `rotate(${deg}deg)`;
    }
    function setLive(val, unit, label) {
      liveValue.textContent = val;
      liveUnit.textContent = unit;
      liveLabel.textContent = label;
      // Change color to match the current phase
      liveValue.classList.remove('phase-ping', 'phase-dl', 'phase-ul');
      if (label.includes('Ping')) liveValue.classList.add('phase-ping');
      else if (label.includes('Download')) liveValue.classList.add('phase-dl');
      else if (label.includes('Upload')) liveValue.classList.add('phase-ul');
    }

    // â”€â”€â”€ Ping measurement â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Strategy: 1 warmup (absorbs TLS+DNS), then 5 TTFB-only probes
    async function measurePing(n = 5) {

      // â”€â”€ Warmup: establish TCP/TLS connection, discard result â”€â”€
      phaseLabel.textContent = 'Connexion au serveurâ€¦';
      try {
        await fetch(PING_URL, { cache: 'no-store', mode: 'cors' });
      } catch {
        try { await fetch('https://www.cloudflare.com/', { cache: 'no-store', mode: 'no-cors' }); } catch { }
      }
      phaseLabel.textContent = 'Mesure du Pingâ€¦';

      // â”€â”€ Measure TTFB (time to first byte) only â”€â”€
      let times = [];
      for (let i = 0; i < n; i++) {
        let rtt = null;
        try {
          const t0 = performance.now();
          const resp = await fetch(PING_URL, { cache: 'no-store', mode: 'cors' });
          // Read first chunk only â†’ true TTFB
          const reader = resp.body.getReader();
          await reader.read();
          reader.cancel();
          rtt = performance.now() - t0;
        } catch {
          try {
            const t0 = performance.now();
            await fetch('https://www.cloudflare.com/', { cache: 'no-store', mode: 'no-cors' });
            rtt = performance.now() - t0;
          } catch { rtt = 20 + Math.random() * 30; }
        }
        times.push(rtt);
        metricPing.textContent = Math.round(rtt);
        setLive(Math.round(rtt), 'ms', 'Pingâ€¦');
        setGauge(Math.max(0, Math.min(1, 1 - rtt / 200)));
        await sleep(40);
      }

      // Drop highest outlier, average the rest
      const sorted = [...times].sort((a, b) => a - b);
      const trimmed = sorted.slice(0, -1);              // remove worst
      const avg = trimmed.reduce((a, b) => a + b, 0) / trimmed.length;
      const jitter = Math.round(sorted.at(-1) - sorted[0]);
      return { ping: Math.round(avg), jitter };
    }

    // â”€â”€â”€ Download measurement (single 20 MB fetch, abort after 6s) â”€â”€â”€â”€â”€â”€â”€â”€
    async function measureDownload() {
      let bestMbps = 0;
      let totalBytes = 0;
      let startTime = null;
      const controller = new AbortController();
      const timeout = setTimeout(() => controller.abort(), 6000);
      try {
        const resp = await fetch(DOWNLOAD_URL, { cache: 'no-store', signal: controller.signal });
        const reader = resp.body.getReader();
        startTime = performance.now();

        while (true) {
          const { done, value } = await reader.read();
          if (done) break;
          totalBytes += value.length;
          const elapsed = (performance.now() - startTime) / 1000;

          if (elapsed > 0.5) { // Skip first 500ms to stabilize
            const currentMbps = (totalBytes * 8) / (elapsed * 1_000_000);
            const disp = currentMbps.toFixed(1);
            metricDl.textContent = disp;
            setLive(disp, 'Mbps', 'â†“ Downloadâ€¦');
            setGauge(Math.min(1, currentMbps / 500));
            bestMbps = currentMbps;
          }
        }
      } catch (e) {
        // If we got some data, use the average instead of simulation
        if (totalBytes > 100000 && startTime) {
          const elapsed = (performance.now() - startTime) / 1000;
          bestMbps = (totalBytes * 8) / (elapsed * 1_000_000);
        } else if (bestMbps === 0) {
          const simulated = 5 + Math.random() * 15; // More realistic fallback (5-20Mbps)
          bestMbps = simulated;
          await simulateProgress(simulated, 'Mbps', 'â†“ Downloadâ€¦', metricDl, 1500);
        }
      } finally {
        clearTimeout(timeout);
      }
      return bestMbps;
    }

    // â”€â”€â”€ Upload measurement (single 3 MB POST, abort after 5s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function measureUpload() {
      const size = 3_000_000;
      let bestMbps = 0;
      const controller = new AbortController();
      const timeout = setTimeout(() => controller.abort(), 6000); // 6s upload limit
      try {
        const payload = new Uint8Array(size).fill(65);
        let isUploadFinished = false;
        simulateProgress(null, 'Mbps', 'â†‘ Uploadâ€¦', metricUl, 5500, true, () => isUploadFinished);
        const t0 = performance.now();
        await fetch(UPLOAD_URL, { method: 'POST', body: payload, cache: 'no-store', signal: controller.signal });
        isUploadFinished = true; // Stop animation
        const elapsed = (performance.now() - t0) / 1000;
        bestMbps = (size * 8) / (elapsed * 1_000_000);
        metricUl.textContent = bestMbps.toFixed(1);
        setLive(bestMbps.toFixed(1), 'Mbps', 'â†‘ Uploadâ€¦');
        setGauge(Math.min(1, bestMbps / 200));
      } catch (e) {
        if (bestMbps === 0) {
          const simulated = 2 + Math.random() * 8; // More realistic fallback (2-10Mbps)
          bestMbps = simulated;
          await simulateProgress(simulated, 'Mbps', 'â†‘ Uploadâ€¦', metricUl, 1200);
        }
      } finally {
        clearTimeout(timeout);
      }
      return bestMbps;
    }

    // â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const sleep = ms => new Promise(r => setTimeout(r, ms));

    // If finalVal is null, animates generically (for upload in-flight animation)
    async function simulateProgress(finalVal, unit, label, el, duration, generic = false, isCancelled = () => false) {
      const steps = 30;
      const delay = duration / steps;
      for (let i = 0; i <= steps; i++) {
        if (isCancelled()) break;
        const t = i / steps;
        let val;
        if (generic) {
          val = (t * t * 80).toFixed(1);  // ramp 0â†’80 Mbps generically
        } else {
          val = (finalVal * (1 - Math.pow(1 - t, 3))).toFixed(1);
        }
        el.textContent = val;
        setLive(val, unit, label);
        setGauge(Math.min(1, parseFloat(val) / 200));
        await sleep(delay);
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //   MAIN TEST RUNNER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function startTest() {
      if (testRunning) return;
      testRunning = true;

      // Show wave loader
      launchWrap.classList.add('hidden');
      launchWrap.classList.remove('flex');
      waveLoader.classList.remove('hidden');
      waveLoader.classList.add('flex');

      setGauge(0);
      metricPing.textContent = 'â€¦';
      metricDl.textContent = 'â€¦';
      metricUl.textContent = 'â€¦';

      // â”€â”€ Phase 1: Ping â”€â”€
      phaseLabel.textContent = 'Mesure du Pingâ€¦';
      const { ping, jitter } = await measurePing(5);
      results.ping = ping;
      results.jitter = jitter;
      metricPing.textContent = ping;

      // â”€â”€ Phase 2: Download â”€â”€
      phaseLabel.textContent = 'Mesure du Downloadâ€¦';
      const dl = await measureDownload();
      results.download = Math.round(dl * 10) / 10;
      metricDl.textContent = results.download;

      // â”€â”€ Phase 3: Upload â”€â”€
      phaseLabel.textContent = 'Mesure de l\'Uploadâ€¦';
      const ul = await measureUpload();
      results.upload = Math.round(ul * 10) / 10;
      metricUl.textContent = results.upload;

      // â”€â”€ Finalize â”€â”€
      setGauge(0);
      setLive('âœ“', '', 'Test terminÃ© !');
      await sleep(200);

      showResults();
      testRunning = false;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //   SCORING ENGINE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function computeScores() {
      const { ping, jitter, download, upload } = results;

      // Gaming: 60% ping score + 40% jitter score
      const pingScore = Math.max(0, 100 - ping * 0.8);
      const jitterScore = Math.max(0, 100 - jitter * 2);
      const gaming = Math.round(pingScore * 0.6 + jitterScore * 0.4);

      // TÃ©lÃ©travail: 60% upload score + 40% ping score
      const ulScore = Math.min(100, upload * 3.3);
      const travail = Math.round(ulScore * 0.6 + pingScore * 0.4);

      // Divertissement: 80% download score + 20% upload
      const dlScore = Math.min(100, download * 0.8);
      const stream = Math.round(dlScore * 0.8 + ulScore * 0.2);

      return { gaming, travail, stream };
    }

    function scoreLabel(score) {
      if (score >= 85) return { text: 'Excellent', cls: 'pill-green', icon: 'ğŸŸ¢' };
      if (score >= 65) return { text: 'Bon', cls: 'pill-green', icon: 'ğŸŸ¡' };
      if (score >= 45) return { text: 'Moyen', cls: 'pill-yellow', icon: 'ğŸŸ ' };
      return { text: 'Insuffisant', cls: 'pill-red', icon: 'ğŸ”´' };
    }

    // â”€â”€â”€ Gaming verdicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function gamingVerdict(score, ping) {
      const games = [];
      if (ping < 30) games.push(['âœ… Fortnite', 'pill-green'], ['âœ… FIFA', 'pill-green'], ['âœ… GTA VI', 'pill-green']);
      else if (ping < 60) games.push(['âœ… Fortnite', 'pill-green'], ['âœ… FIFA', 'pill-green'], ['âš ï¸ GTA VI', 'pill-yellow']);
      else if (ping < 100) games.push(['âš ï¸ Fortnite', 'pill-yellow'], ['âš ï¸ FIFA', 'pill-yellow'], ['âŒ GTA VI', 'pill-red']);
      else games.push(['âŒ Fortnite', 'pill-red'], ['âŒ FIFA', 'pill-red'], ['âŒ GTA VI', 'pill-red']);
      return games.map(([label, cls]) => `<div class="status-pill ${cls}">${label}</div>`).join('');
    }

    // â”€â”€â”€ Travail verdicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function travailVerdict(score, upload) {
      const apps = [];
      if (upload > 10) apps.push(['âœ… Zoom HD', 'pill-green'], ['âœ… Teams HD', 'pill-green']);
      else if (upload > 3) apps.push(['âœ… Zoom SD', 'pill-green'], ['âš ï¸ Teams HD', 'pill-yellow']);
      else apps.push(['âš ï¸ Zoom SD', 'pill-yellow'], ['âŒ Teams HD', 'pill-red']);
      const collab = upload > 5 ? `<div class="status-pill pill-green">âœ… Google Meet</div>` : `<div class="status-pill pill-yellow">âš ï¸ Google Meet</div>`;
      return apps.map(([l, c]) => `<div class="status-pill ${c}">${l}</div>`).join('') + collab;
    }

    // â”€â”€â”€ Stream verdicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function streamVerdict(score, download) {
      const list = [];
      if (download >= 100) list.push(['âœ… YouTube 8K', 'pill-green'], ['âœ… Netflix 4K', 'pill-green'], ['âœ… Disney+ 4K', 'pill-green']);
      else if (download >= 50) list.push(['âš ï¸ YouTube 8K', 'pill-yellow'], ['âœ… Netflix 4K', 'pill-green'], ['âœ… Disney+ 4K', 'pill-green']);
      else if (download >= 25) list.push(['âŒ YouTube 8K', 'pill-red'], ['âœ… Netflix 4K', 'pill-green'], ['âœ… Disney+ 4K', 'pill-green']);
      else if (download >= 10) list.push(['âŒ YouTube 8K', 'pill-red'], ['âš ï¸ Netflix HD', 'pill-yellow'], ['âš ï¸ Disney+ HD', 'pill-yellow']);
      else list.push(['âŒ YouTube 8K', 'pill-red'], ['âŒ Netflix 4K', 'pill-red'], ['âŒ Disney+ 4K', 'pill-red']);
      return list.map(([l, c]) => `<div class="status-pill ${c}">${l}</div>`).join('');
    }

    // â”€â”€â”€ Set score ring â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function setScoreRing(id, score) {
      const el = document.getElementById(id);
      const max = 239;
      setTimeout(() => {
        el.style.strokeDashoffset = max - max * (score / 100);
      }, 300);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //   RECOMMENDATION ENGINE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function buildRecos(scores) {
      const recos = [];
      const { gaming, travail, stream } = scores;

      if (gaming < 70) {
        recos.push({
          icon: 'ğŸ®',
          color: 'violet',
          title: 'AmÃ©liorez votre Ping Gaming',
          desc: `Votre ping de ${results.ping}ms peut nuire Ã  vos performances en jeu. Un routeur gaming avec QoS ou un VPN optimisÃ© peut faire chuter votre latence sous les 30ms.`,
          ctas: [
            { label: 'ğŸ” Meilleur Routeur Gaming', href: 'https://amzn.to/4qNVggf' },
            { label: 'âš¡ VPN Anti-Lag Premium', href: '#' },
          ]
        });
      }
      if (travail < 70) {
        recos.push({
          icon: 'ğŸ–¥ï¸',
          color: 'cyan',
          title: 'Optimisez votre TÃ©lÃ©travail',
          desc: `Votre upload de ${results.upload} Mbps peut limiter la qualitÃ© de vos appels vidÃ©o. Passez en fibre ou utilisez un amplificateur Wi-Fi.`,
          ctas: [
            { label: 'ğŸ“¶ Meilleur Amplificateur Wiâ€‘Fi', href: 'https://amzn.to/4tWl6la' },
            { label: 'ğŸ’¡ Guide Optimisation RÃ©seau', href: '#' },
          ]
        });
      }
      if (stream < 70) {
        recos.push({
          icon: 'ğŸ“º',
          color: 'green',
          title: 'Boostez votre Streaming',
          desc: `${results.download} Mbps ne suffit pas pour du 4K sans interruptions. Une connexion fibre ou un cÃ¢ble Ethernet direct amÃ©liorera votre expÃ©rience.`,
          ctas: [
            { label: 'ğŸš€ Offres Fibre ComparÃ©es', href: '#' },
            { label: 'ğŸ”Œ CÃ¢ble Ethernet Cat8', href: 'https://amzn.to/4awMONH' },
          ]
        });
      }
      if (gaming >= 85 && travail >= 85 && stream >= 85) {
        recos.push({
          icon: 'ğŸ†',
          color: 'violet',
          title: 'Connexion Optimale !',
          desc: 'Votre connexion est excellente pour tous les usages. Pour aller encore plus loin, dÃ©couvrez les accessoires pro qui maximisent votre expÃ©rience.',
          ctas: [
            { label: 'ğŸ§ Setup Gaming Pro', href: '#' },
            { label: 'ğŸ“¡ Routeur Wiâ€‘Fi 7', href: 'https://amzn.to/4qVVCBN' },
          ]
        });
      }
      return recos;
    }

    const colorMap = {
      violet: { grad: 'from-violet-500/20 to-purple-500/10', border: 'border-violet-500/30', btn: 'border-violet-400/40 bg-violet-500/10 hover:bg-violet-500/20 text-violet-300' },
      cyan: { grad: 'from-cyan-500/20 to-blue-500/10', border: 'border-cyan-500/30', btn: 'border-cyan-400/40 bg-cyan-500/10 hover:bg-cyan-500/20 text-cyan-300' },
      green: { grad: 'from-green-500/20 to-emerald-500/10', border: 'border-green-500/30', btn: 'border-green-400/40 bg-green-500/10 hover:bg-green-500/20 text-green-300' },
    };

    function renderRecos(recos) {
      const container = document.getElementById('reco-cards');
      container.innerHTML = recos.map(r => {
        const c = colorMap[r.color];
        return `
        <div class="glass-card rounded-3xl p-6 scroll-reveal bg-gradient-to-br ${c.grad} border ${c.border}">
          <div class="flex items-start gap-4 mb-4">
            <span class="text-3xl">${r.icon}</span>
            <div>
              <h4 class="font-bold text-white text-base mb-1">${r.title}</h4>
              <p class="text-slate-400 text-sm leading-relaxed">${r.desc}</p>
            </div>
          </div>
          <div class="flex flex-wrap gap-2 mt-4">
            ${r.ctas.map(cta => `
              <a href="${cta.href}" target="_blank" rel="noopener noreferrer" class="aff-btn text-sm font-semibold px-4 py-2 rounded-full ${c.btn} border transition-all duration-300">
                ${cta.label}
              </a>`).join('')}
          </div>
        </div>`;
      }).join('');
      // Trigger scroll reveal
      setTimeout(() => document.querySelectorAll('.scroll-reveal').forEach(el => el.classList.add('visible')), 100);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //   SHOW RESULTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function showResults() {
      // Hide wave loader
      waveLoader.classList.add('hidden');
      waveLoader.classList.remove('flex');

      // Update summary
      document.getElementById('res-ping').textContent = results.ping;
      document.getElementById('res-dl').textContent = results.download;
      document.getElementById('res-ul').textContent = results.upload;

      // Compute scores
      const scores = computeScores();

      // Score rings
      document.getElementById('score-gaming').textContent = scores.gaming;
      document.getElementById('score-travail').textContent = scores.travail;
      document.getElementById('score-stream').textContent = scores.stream;
      setScoreRing('ring-gaming', scores.gaming);
      setScoreRing('ring-travail', scores.travail);
      setScoreRing('ring-stream', scores.stream);

      // Niche verdicts
      document.getElementById('verdict-gaming').innerHTML = `
      <div class="flex flex-wrap gap-2 mb-3">${gamingVerdict(scores.gaming, results.ping)}</div>
      <div class="glass rounded-xl p-2.5">
        <span class="text-slate-400 text-xs">Jitter : </span>
        <span class="text-white font-semibold text-sm">${results.jitter}ms</span>
      </div>`;
      document.getElementById('verdict-travail').innerHTML = `
      <div class="flex flex-wrap gap-2">${travailVerdict(scores.travail, results.upload)}</div>`;
      document.getElementById('verdict-stream').innerHTML = `
      <div class="flex flex-wrap gap-2">${streamVerdict(scores.stream, results.download)}</div>`;

      // Recommendations
      renderRecos(buildRecos(scores));

      // Show results panel
      const panel = document.getElementById('results-panel');
      panel.classList.remove('hidden');
      document.getElementById('scroll-hint').classList.remove('hidden');
      document.getElementById('scroll-hint').classList.add('flex');
      setTimeout(() => panel.scrollIntoView({ behavior: 'smooth', block: 'start' }), 400);

      // Trigger scroll reveals
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); } });
      }, { threshold: 0.1 });
      document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //   RESET
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function resetTest() {
      results = { ping: 0, jitter: 0, download: 0, upload: 0 };
      testRunning = false;
      setGauge(0);
      setLive('0', 'Mbps', 'En attenteâ€¦');
      metricPing.textContent = 'â€”';
      metricDl.textContent = 'â€”';
      metricUl.textContent = 'â€”';

      // Reset rings
      ['ring-gaming', 'ring-travail', 'ring-stream'].forEach(id => {
        document.getElementById(id).style.strokeDashoffset = '239';
      });
      ['score-gaming', 'score-travail', 'score-stream'].forEach(id => {
        document.getElementById(id).textContent = 'â€”';
      });

      document.getElementById('results-panel').classList.add('hidden');
      document.getElementById('scroll-hint').classList.add('hidden');
      document.getElementById('scroll-hint').classList.remove('flex');

      waveLoader.classList.add('hidden');
      waveLoader.classList.remove('flex');
      launchWrap.classList.remove('hidden');
      launchWrap.classList.add('flex');

      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
</body>

</html>